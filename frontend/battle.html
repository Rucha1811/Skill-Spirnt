<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battle Arena - SkillSprint</title>
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="stylesheet" href="assets/battle.css">
    <link rel="stylesheet" href="assets/animations.css">
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <div class="app-container">
        <!-- Lobby Screen -->
        <section id="battleLobby" class="battle-section">
            <h1>‚öîÔ∏è Battle Arena</h1>
            
            <div class="lobby-container">
                <div class="lobby-content">
                    <h2>Find Your Opponent</h2>
                    
                    <div class="challenge-selector">
                        <label>Select Challenge Difficulty:</label>
                        <select id="difficultySelect" class="select-input">
                            <option value="">All</option>
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>

                    <button class="btn btn-primary btn-lg btn-pulse" onclick="createBattle()">
                        <span class="btn-icon">üéÆ</span>
                        Create Battle
                    </button>

                    <div class="available-battles">
                        <h3>Available Battles</h3>
                        <div id="availableBattles" class="battles-list">
                            <!-- Battles will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Battle in Progress -->
        <section id="battleInProgress" class="battle-section" style="display:none;">
            <div class="battle-header">
                <div class="countdown" id="countdown" style="display:none;">
                    <div class="countdown-number" id="countdownNumber">3</div>
                </div>
            </div>

            <div class="battle-arena glass-card">
                <!-- Player 1 Side -->
                <div class="battle-player player-1">
                    <div class="player-card">
                        <img id="player1Avatar" class="battle-avatar" src="" alt="Player 1">
                        <h3 id="player1Name">Player 1</h3>
                        <div class="player-level" id="player1Level">Level 1</div>
                    </div>
                    <div class="player-progress">
                        <div class="progress-label">Progress</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="player1Progress" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>

                <!-- VS Indicator -->
                <div class="vs-indicator">
                    <div class="neon-border">VS</div>
                </div>

                <!-- Player 2 Side -->
                <div class="battle-player player-2">
                    <div class="player-card">
                        <img id="player2Avatar" class="battle-avatar" src="" alt="Player 2">
                        <h3 id="player2Name">Waiting...</h3>
                        <div class="player-level" id="player2Level">-</div>
                    </div>
                    <div class="player-progress">
                        <div class="progress-label">Progress</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="player2Progress" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timer -->
            <div class="battle-timer">
                <div class="timer-circle">
                    <div class="timer-ring" id="timerRing"></div>
                    <div class="timer-text" id="timerText">60s</div>
                </div>
            </div>

            <!-- Code Editor -->
            <div class="battle-editor-container">
                <div class="code-editor-section">
                    <h3>Challenge Code</h3>
                    <textarea id="battleCodeEditor" class="code-editor" placeholder="// Write your code here..."></textarea>
                </div>
                
                <div class="battle-actions">
                    <button class="btn btn-primary" onclick="submitBattleSolution()">Submit</button>
                    <button class="btn btn-secondary" onclick="leaveBattle()">Leave Battle</button>
                </div>
            </div>
        </section>

        <!-- Battle Result -->
        <section id="battleResult" class="battle-section" style="display:none;">
            <div class="result-screen">
                <div id="resultContent">
                    <!-- Result will be displayed here -->
                </div>
                <button class="btn btn-primary" onclick="backToLobby()">Back to Lobby</button>
            </div>
        </section>

        <nav class="mobile-hud-bar">
            <a href="index.html" class="hud-icon" title="Home">üè†</a>
            <a href="dashboard.html" class="hud-icon" title="Dashboard">üìä</a>
            <a href="challenges.html" class="hud-icon" title="Challenges">üéØ</a>
            <a href="leaderboard.html" class="hud-icon" title="Leaderboard">üèÜ</a>
            <a href="profile.html" class="hud-icon" title="Profile">üë§</a>
        </nav>

        <div id="notificationContainer" class="notification-container"></div>
    </div>

    <script src="assets/utils.js"></script>
    <script src="assets/animations.js"></script>
    <script src="assets/api.js"></script>
    <script src="assets/battle.js"></script>
</body>
</html>
